# LLMに渡す前に機密情報をマスキングするサンプル

このプロジェクトは`langchainjs`にて`secretlint`を使ってLLM（大規模言語モデル）にメッセージを渡す前に機密情報（APIキー、トークン、パスワードなど）を自動的にマスキング（秘匿化）するサンプルコードです。

## 特徴

### 導入が容易

`SecureChatOpenAI` クラスを使うだけで、アプリケーション全体に機密情報マスキング機能を追加できます。既存の `ChatOpenAI` を使っている箇所を置き換えるだけで対応可能です。

### 影響範囲の限定

マスキング処理のロジックは `SecureChatOpenAI` クラス内に閉じ込められています。そのため、アプリケーションの他の部分（例えば、UI や他のビジネスロジックなど）に影響を与えることなく、セキュリティ対策を導入できます。

### メンテナンス性の向上

セキュリティに関するコードが１箇所にまとまっているため、将来的にマスキングのルールを変更したり、機能を拡張したりする場合も、修正箇所が明確になり、メンテナンスが容易になります。


## ディレクトリ構成

- index.ts
  - サンプル実行用スクリプト。
- llm.ts
  - LLMパイプラインへのマスキング処理の組み込み。
- mask-secrets.ts
  - secretlintを使ったマスキング処理の実装。

## 使い方

### 依存パッケージのインストール

```bash
pnpm install
```

### サンプルの実行

```bash
pnpm start
```

実行すると、メッセージ内の機密情報が `********` に置き換えられてLLMに渡されることが確認できます。

## 主なファイル

- `src/mask-secrets.ts`  
  secretlintを使ったマスキング処理の実装。
- `src/llm.ts`  
  LLMパイプラインへのマスキング処理の組み込み。
- `src/index.ts`  
  サンプル実行用スクリプト。
